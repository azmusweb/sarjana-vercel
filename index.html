<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Detik Lite</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0078c1;
      --dark: #333;
      --light: #f9f9f9;
      --border: #ddd;
      --hover: #005a9c;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body { font-family:'Open Sans',sans-serif; background:var(--light); color:var(--dark); }
    header { background:var(--primary); color:#fff; padding:10px 20px; }
    header h1 { font-size:1.6rem; }
    nav { background:#fff; border-bottom:1px solid var(--border); display:flex; flex-wrap:wrap; justify-content:center; padding:5px 0; }
    nav a { margin:0 15px; color:var(--dark); text-decoration:none; font-weight:600; }
    nav a:hover { color:var(--primary); }

    /* Slider */
    .slider { position:relative; max-width:1200px; margin:20px auto; overflow:hidden; }
    .slides { display:flex; transition:transform .5s ease; }
    .slide { min-width:100%; position:relative; }
    .slide img { width:100%; display:block; }
    .slide .caption { position:absolute; bottom:10%; left:5%; background:rgba(0,0,0,0.6); color:#fff; padding:8px 12px; font-size:1.2rem; border-radius:4px; }

    /* Layout */
    .main { display:flex; max-width:1200px; margin:20px auto; gap:20px; padding:0 10px; }
    .content { flex:3; }
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:15px; }
    .card { background:#fff; border:1px solid var(--border); border-radius:4px; overflow:hidden; }
    .card img { width:100%; }
    .card .info { padding:10px; }
    .card h2 { font-size:1rem; margin-bottom:6px; color:var(--dark); }
    .card p { font-size:.85rem; color:#555; margin-bottom:8px; }
    .card a { color:var(--primary); text-decoration:none; font-size:.9rem; }
    .card a:hover { color:var(--hover); }

    .sidebar { flex:1; min-width:200px; }
    .widget { background:#fff; border:1px solid var(--border); border-radius:4px; margin-bottom:20px; }
    .widget h3 { background:var(--primary); color:#fff; padding:8px; font-size:1rem; border-radius:4px 4px 0 0; }
    .widget ul { list-style:none; padding:10px; }
    .widget li { margin-bottom:8px; }
    .widget a { color:var(--dark); text-decoration:none; font-size:.9rem; }
    .widget a:hover { color:var(--primary); }

    /* Detail */
    #detail { display:none; max-width:800px; margin:20px auto; background:#fff; border:1px solid var(--border); border-radius:4px; padding:20px; }
    #detail img { width:100%; margin-bottom:15px; border-radius:4px; }
    #detail h2 { margin-bottom:10px; color:var(--dark); }
    #detail .meta { font-size:.85rem; color:#777; margin-bottom:15px; }
    #detail .body { line-height:1.6; }
    #detail button { background:var(--primary); color:#fff; border:none; padding:8px 12px; cursor:pointer; border-radius:4px; font-size:.9rem; }
    #detail button:hover { background:var(--hover); }

    footer { text-align:center; padding:15px; background:#eee; font-size:.85rem; color:#555; margin-top:40px; }

    @media(max-width:768px){
      nav { justify-content:center; }
      .main { flex-direction:column; }
    }
  </style>
</head>
<body>

  <header><h1>Detik Lite</h1></header>
  <nav>
    <a href="#" onclick="goHome()">Home</a>
    <a href="#" onclick="filterCat('Nasional')">Nasional</a>
    <a href="#" onclick="filterCat('Internasional')">Internasional</a>
    <a href="#" onclick="filterCat('Teknologi')">Teknologi</a>
    <a href="#" onclick="filterCat('Hiburan')">Hiburan</a>
    <a href="#" onclick="filterCat('Olahraga')">Olahraga</a>
  </nav>

  <div class="slider"><div class="slides" id="slides"></div></div>

  <div class="main">
    <div class="content">
      <div class="grid" id="grid"></div>
    </div>
    <aside class="sidebar">
      <div class="widget"><h3>Trending</h3><ul id="trending"></ul></div>
      <div class="widget"><h3>Terpopuler</h3><ul id="popular"></ul></div>
    </aside>
  </div>

  <div id="detail">
    <button onclick="goHome()">‚Üê Kembali</button>
    <h2 id="d-title"></h2>
    <p class="meta" id="d-meta"></p>
    <img id="d-img" src="" alt="">
    <p class="body" id="d-body"></p>
  </div>

  <footer>&copy; 2025 Detik Lite</footer>

  <script>
    const URL = 'https://opensheet.vercel.app/1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww/berita';
    let articles = [];

    fetch(URL).then(r=>r.json()).then(j=>{ articles=j; init(); });

    function init(){
      renderSlider();
      renderGrid();
      renderWidgets();
      checkSlug();
    }

    function renderSlider(){
      const s = document.getElementById('slides');
      articles.slice(0,5).forEach(a=>{
        const div = document.createElement('div'); div.className='slide';
        div.innerHTML = `<img src="${a.Gambar}" alt=""><div class="caption">${a.Judul}</div>`;
        s.appendChild(div);
      });
      let idx=0;
      setInterval(()=>{
        idx=(idx+1)%s.children.length;
        s.style.transform = 'translateX('+(-idx*100)+'%)';
      },3000);
    }

    function renderGrid(cat){
      goHomeUI();
      const grid = document.getElementById('grid');
      grid.innerHTML='';
      articles.filter(a=>!cat||a.Label===cat).forEach(a=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <img src="${a.Gambar}" alt="">
          <div class="info">
            <h2><a href="?slug=${a.Slug}">${a.Judul}</a></h2>
            <p>${a.Tanggal}</p>
            <p>${a.Isi.slice(0,100)}...</p>
          </div>`;
        card.querySelector('a').onclick=e=>{e.preventDefault(); showDetail(a.Slug);};
        grid.appendChild(card);
      });
    }

    function renderWidgets(){
      const trend = document.getElementById('trending'), pop = document.getElementById('popular');
      trend.innerHTML = pop.innerHTML = '';
      articles.slice(0,5).forEach(a=>{
        const li = document.createElement('li');
        li.innerHTML = `<a href="?slug=${a.Slug}">${a.Judul}</a>`;
        li.querySelector('a').onclick=e=>{e.preventDefault();showDetail(a.Slug);};
        trend.appendChild(li);
      });
      [...articles].sort((a,b)=>b.View-a.View).slice(0,5).forEach(a=>{
        const li = document.createElement('li');
        li.innerHTML = `<a href="?slug=${a.Slug}">${a.Judul}</a>`;
        li.querySelector('a').onclick=e=>{e.preventDefault();showDetail(a.Slug);};
        pop.appendChild(li);
      });
    }

    function checkSlug(){
      const s = new URLSearchParams(location.search).get('slug');
      if(s) showDetail(s);
    }

    function showDetail(slug){
      const a = articles.find(x=>x.Slug===slug);
      if(!a) return goHome();
      document.getElementById('d-title').textContent = a.Judul;
      document.getElementById('d-meta').textContent = a.Tanggal+' | '+a.Label;
      document.getElementById('d-img').src = a.Gambar;
      document.getElementById('d-body').textContent = a.Isi;
      document.querySelector('.main').style.display='none';
      document.querySelector('.slider').style.display='none';
      document.getElementById('detail').style.display='block';
    }

    function goHome(){
      history.replaceState({},'',location.pathname);
      renderGrid();
    }
    function goHomeUI(){
      document.querySelector('.main').style.display='flex';
      document.querySelector('.slider').style.display='block';
      document.getElementById('detail').style.display='none';
    }
    function filterCat(cat){ renderGrid(cat); }
  </script>
</body>
</html>
