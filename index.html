<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SARJANA – Portal Berita</title>
  <meta name="description" content="SARJANA – Portal Berita dinamis dengan tampilan premium dan responsif." />
  <link rel="canonical" href="https://sarjana.web.id" />
  <meta property="og:title" content="SARJANA – Portal Berita" />
  <meta property="og:description" content="SARJANA – Portal Berita dinamis dengan tampilan premium dan responsif." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sarjana.web.id" />
  <meta property="og:image" content="https://via.placeholder.com/1200x630" />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Open Sans', sans-serif; background: #f9f9f9; margin: 0; padding: 0; }
    header { background: linear-gradient(to right, #0d324d, #7f5a83); padding: 1rem; color: white; display: flex; justify-content: space-between; align-items: center; }
    .logo { font-size: 1.5rem; font-weight: bold; }
    .hamburger { display: none; flex-direction: column; cursor: pointer; }
    .hamburger span { height: 3px; background: white; margin: 4px 0; width: 25px; }
    nav ul { list-style: none; display: flex; gap: 1rem; justify-content: center; padding: 0.5rem; background: white; flex-wrap: wrap; }
    nav ul li { position: relative; }
    nav ul li ul.submenu { display: none; position: absolute; background: white; top: 100%; left: 0; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    nav ul li:hover ul.submenu { display: block; }
    nav a { text-decoration: none; color: #222; font-weight: 600; }
    .slider, .featured, .main, .detail { max-width: 1200px; margin: auto; padding: 1rem; }
    .slides { display: flex; overflow: hidden; }
    .slide { min-width: 100%; transition: transform 0.5s ease; position: relative; }
    .slide img { width: 100%; }
    .caption { position: absolute; bottom: 10%; left: 5%; background: rgba(0,0,0,0.6); color: white; padding: 1rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; }
    .card { background: white; border: 1px solid #ddd; border-radius: 5px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .card img { width: 100%; }
    .card .info { padding: 1rem; }
    .card h2 { font-size: 1rem; margin: 0 0 0.5rem; }
    .detail { display: none; background: white; border: 1px solid #ddd; border-radius: 5px; padding: 2rem; }
    footer { text-align: center; padding: 1rem; background: #eee; margin-top: 2rem; }
  </style>
</head>
<body>
  <header>
    <div class="logo"><a href="/" style="color:white;text-decoration:none;">SARJANA</a></div>
    <div class="hamburger" onclick="toggleNav()"><span></span><span></span><span></span></div>
  </header>
  <nav id="navbar">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/berita">Berita</a>
        <ul class="submenu">
          <li><a href="/Nasional">Nasional</a></li>
          <li><a href="/Internasional">Internasional</a></li>
          <li><a href="/Teknologi">Teknologi</a></li>
          <li><a href="/Olahraga">Olahraga</a></li>
        </ul>
      </li>
      <li><a href="/Ekonomi">Ekonomi</a></li>
      <li><a href="/Hiburan">Hiburan</a></li>
      <li><a href="/Lifestyle">Lifestyle</a></li>
    </ul>
  </nav>
  <div class="slider"><div class="slides" id="slides"></div></div>
  <div class="featured">
    <h2 id="feat-title"></h2>
    <img id="feat-img" src="" alt="">
  </div>
  <div class="main">
    <div class="grid" id="grid"></div>
  </div>
  <div class="detail" id="detail">
    <button onclick="goHome()">← Kembali</button>
    <h2 id="d-title"></h2>
    <p id="d-meta"></p>
    <img id="d-img" src="" alt="">
    <div id="d-body"></div>
  </div>
  <footer>
    Powered by <a href="https://opensite.web.id" target="_blank">opensite.web.id</a>
  </footer>
  <script>
    const URL = 'https://opensheet.vercel.app/1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww/berita';
    let articles = [];

    fetch(URL)
      .then(res => res.json())
      .then(data => {
        articles = data;
        renderSlider();
        renderFeatured();
        routeHandler();
      });

    function renderSlider() {
      const slideWrap = document.getElementById('slides');
      slideWrap.innerHTML = '';
      articles.slice(0, 5).forEach(a => {
        const div = document.createElement('div');
        div.className = 'slide';
        div.innerHTML = `<img src="${a.Gambar}" alt=""><div class="caption">${a.Judul}</div>`;
        slideWrap.appendChild(div);
      });
    }

    function renderFeatured() {
      const feat = articles[0];
      document.getElementById('feat-img').src = feat.Gambar;
      document.getElementById('feat-title').textContent = feat.Judul;
    }

    function renderGrid(label) {
      document.getElementById('detail').style.display = 'none';
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      const filtered = label ? articles.filter(a => a.Label === label) : articles;
      filtered.forEach(a => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<img src="${a.Gambar}" alt="">
          <div class="info"><h2><a href="/${a.Slug}" onclick="event.preventDefault();showDetail('${a.Slug}')">${a.Judul}</a></h2>
          <p>${a.Tanggal}</p></div>`;
        grid.appendChild(card);
      });
    }

    function showDetail(slug) {
      const a = articles.find(x => x.Slug === slug);
      if (!a) return;
      document.getElementById('detail').style.display = 'block';
      document.getElementById('d-title').textContent = a.Judul;
      document.getElementById('d-meta').textContent = `${a.Tanggal} | ${a.Label}`;
      document.getElementById('d-img').src = a.Gambar;
      document.getElementById('d-body').textContent = a.Isi;
      document.querySelector('.main').style.display = 'none';
      document.querySelector('.slider').style.display = 'none';
      document.querySelector('.featured').style.display = 'none';
    }

    function goHome() {
      history.pushState({}, '', '/');
      document.querySelector('.detail').style.display = 'none';
      document.querySelector('.main').style.display = 'block';
      document.querySelector('.slider').style.display = 'block';
      document.querySelector('.featured').style.display = 'block';
      renderGrid();
    }

    function routeHandler() {
      const path = location.pathname.replace('/', '');
      if (!path || path === 'berita') {
        renderGrid();
      } else if (articles.find(a => a.Slug === path)) {
        showDetail(path);
      } else {
        renderGrid(path);
      }
    }

    window.onpopstate = routeHandler;
  </script>
</body>
</html>
