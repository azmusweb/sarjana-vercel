<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sarjana - Website Berita</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #004d40;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    #berita-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1rem;
      padding: 1rem;
    }
    .berita-item {
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
    }
    .berita-item img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .berita-item .konten {
      padding: 1rem;
    }
    .berita-item h3 {
      margin: 0 0 0.5rem;
    }
    .berita-item p {
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>

<header>
  <h1>Sarjana.web.id</h1>
  <p>Berita Dinamis dari Google Spreadsheet</p>
</header>

<main>
  <div id="berita-container">
    <!-- Data berita akan dimuat di sini -->
  </div>
</main>

<script>
  const apiKey = "AIzaSyDKOClQy1z23Hwjr9HyHmzJbuaPE9Ccbv4";
  const sheetId = "1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww";
  const sheetName = "Live Website";

  async function loadBerita() {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${sheetName}?key=${apiKey}`;
    
    try {
      const res = await fetch(url);
      const data = await res.json();
      const rows = data.values;

      if (!rows || rows.length < 2) {
        document.getElementById('berita-container').innerHTML = "<p>Tidak ada data ditemukan.</p>";
        return;
      }

      const beritaHTML = rows.slice(1).map(row => {
        const judul = row[0] || '';
        const label = row[1] || '';
        const gambar = row[2] || '';
        const isi = row[3] || '';
        const slug = row[4] || '';
        const tanggal = row[7] || '';

        return `
          <div class="berita-item">
            <img src="${gambar}" alt="${judul}">
            <div class="konten">
              <span style="font-size: 0.8rem; color: gray;">${label} â€¢ ${tanggal}</span>
              <h3>${judul}</h3>
              <p>${isi.substring(0, 100)}...</p>
              <a href="berita.html?slug=${encodeURIComponent(slug)}">Baca Selengkapnya</a>
            </div>
          </div>
        `;
      }).join('');

      document.getElementById('berita-container').innerHTML = beritaHTML;
    } catch (error) {
      console.error("Gagal memuat data:", error);
      document.getElementById('berita-container').innerHTML = "<p>Gagal memuat data dari spreadsheet.</p>";
    }
  }

  loadBerita();
</script>

</body>
</html>
