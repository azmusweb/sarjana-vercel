<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SARJANA ‚Äì Portal Berita</title>
  <meta name="description" content="SARJANA ‚Äì Portal Berita dinamis dengan tampilan premium dan responsif.">
  <link rel="canonical" href="https://sarjana.web.id">
  <meta property="og:title" content="SARJANA ‚Äì Portal Berita">
  <meta property="og:description" content="SARJANA ‚Äì Portal Berita dinamis dengan tampilan premium dan responsif.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sarjana.web.id">
  <meta property="og:image" content="https://via.placeholder.com/1200x630">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-start: #0d324d;
      --primary-end:   #7f5a83;
      --accent:       #ffc857;
      --dark:         #222;
      --light:        #fafafa;
      --border:       #e0e0e0;
      --hover:        #5a3e85;
      --shadow:       rgba(0,0,0,0.1);
    }
    * { box-sizing:border-box; margin:0; padding:0; }
    body {
      font-family:'Open Sans',sans-serif;
      background:var(--light);
      color:var(--dark);
      line-height:1.6;
    }
    /* Header */
    header {
      background:linear-gradient(135deg,var(--primary-start),var(--primary-end));
      color:#fff; padding:15px 20px;
      display:flex;align-items:center;justify-content:space-between;
      box-shadow:0 2px 4px var(--shadow);position:relative;z-index:1000;
    }
    .logo a {
      color:#fff; text-decoration:none;
      font-size:1.5rem; font-weight:700;
    }
    .social-top img {
      width:24px;height:24px;margin-left:12px;
    }
    /* Hamburger */
    .hamburger {
      display:none; flex-direction:column; cursor:pointer;
    }
    .hamburger span {
      height:3px; width:25px; background:#fff; margin:4px 0; transition:0.3s;
    }
    /* Navigation */
    nav {
      background:#fff; border-bottom:1px solid var(--border);
      overflow:hidden; transition:max-height .3s ease-in-out;
    }
    nav.closed { max-height:0; }
    nav.open   { max-height:600px; }
    nav ul {
      list-style:none; display:flex; gap:20px;
      justify-content:center; padding:10px 0;
    }
    nav li { position:relative; }
    nav a {
      text-decoration:none; color:var(--dark);
      font-weight:600; padding:8px; border-radius:4px; display:block;
    }
    nav a:hover, nav a.active {
      background:var(--accent); color:var(--primary-end);
    }
    .submenu {
      display:none; position:absolute; top:100%; left:0;
      background:#fff; border:1px solid var(--border);
      border-radius:5px; box-shadow:0 2px 6px var(--shadow);
      min-width:160px; z-index:1000;
    }
    li.open > .submenu { display:block; }
    .submenu a { padding:10px 12px; }
    /* Slider */
    .slider {
      max-width:1200px; margin:25px auto; overflow:hidden;
      border-radius:8px; box-shadow:0 4px 8px var(--shadow);
    }
    .slides { display:flex; transition:transform .5s ease; }
    .slide { min-width:100%; position:relative; }
    .slide img { width:100%; }
    .slide .caption {
      position:absolute; bottom:15%; left:5%; padding:10px 14px;
      background:rgba(0,0,0,0.6); color:#fff; border-radius:4px;
      font-size:1.2rem; max-width:90%;
    }
    /* Featured */
    .featured {
      display:flex; flex-wrap:wrap; max-width:1200px;
      margin:30px auto; gap:20px; padding:0 20px;
    }
    .featured img {
      flex:2; width:100%; border-radius:8px;
      box-shadow:0 2px 6px var(--shadow);
    }
    .featured h2 {
      flex:1; align-self:center;
      font-size:1.6rem; padding:10px; color:var(--dark);
    }
    /* Main & Grid */
    .main {
      display:flex; flex-wrap:wrap; max-width:1200px;
      margin:30px auto; gap:24px; padding:0 20px;
    }
    .content { flex:3; min-width:320px; }
    .grid {
      display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
      gap:20px;
    }
    .card {
      background:#fff; border:1px solid var(--border);
      border-radius:8px; overflow:hidden;
      box-shadow:0 2px 6px var(--shadow);
      transition:transform .3s;
    }
    .card:hover { transform:translateY(-6px); }
    .card img { width:100%; }
    .card .info { padding:14px; }
    .card h2 { font-size:1.1rem; margin-bottom:8px; }
    .card p  { font-size:.9rem; color:#666; margin-bottom:10px; }
    .card a  { color:var(--accent); font-weight:600; }
    .card a:hover { color:var(--primary-end); }
    /* Ad slot */
    .ad-slot {
      background:var(--light); border:2px dashed var(--accent);
      color:var(--accent); text-align:center; padding:30px;
      margin:24px 0; border-radius:8px;
    }
    /* Sidebar */
    aside { flex:1; min-width:240px; }
    .widget {
      background:#fff; border:1px solid var(--border);
      border-radius:8px; margin-bottom:24px;
      box-shadow:0 2px 6px var(--shadow);
    }
    .widget h3 {
      background:linear-gradient(135deg,var(--primary-start),var(--primary-end));
      color:#fff; padding:12px; font-size:1.1rem;
    }
    .widget ul { list-style:none; padding:12px; }
    .widget li {
      opacity:0; transform:translateX(-15px);
      animation:fadeIn .5s forwards;
    }
    .widget li:nth-child(1){animation-delay:.2s;}
    .widget li:nth-child(2){animation-delay:.3s;}
    .widget li:nth-child(3){animation-delay:.4s;}
    .widget li:nth-child(4){animation-delay:.5s;}
    .widget a { font-size:.9rem; color:var(--dark); }
    .widget a:hover { color:var(--accent); }
    /* Detail */
    #detail {
      display:none; max-width:800px; margin:30px auto;
      background:#fff; border:1px solid var(--border);
      border-radius:8px; padding:24px;
      box-shadow:0 2px 6px var(--shadow);
    }
    #detail button {
      background:var(--accent); color:var(--primary-end);
      border:none; padding:8px 14px; border-radius:4px;
      cursor:pointer; margin-bottom:20px;
    }
    #detail button:hover { background:var(--hover); color:#fff; }
    #detail h2     { font-size:1.5rem; margin-bottom:12px; }
    #detail .meta  { font-size:.9rem; color:#777; margin-bottom:16px; }
    #detail img    { width:100%; border-radius:6px; margin-bottom:16px; }
    #detail .body  { line-height:1.7; color:#444; margin-bottom:18px; }
    #detail .share { display:flex; gap:12px; font-size:1.4rem; margin-bottom:20px; }
    #detail .share a { color:var(--dark); transition:color .2s; }
    #detail .share a:hover { color:var(--accent); }
    /* Footer */
    footer {
      text-align:center; padding:16px; background:var(--light);
      border-top:1px solid var(--border); font-size:.85rem; color:#555;
      margin-top:40px;
    }
    @keyframes fadeIn {
      to { opacity:1; transform:translateX(0); }
    }
    @media(max-width:768px) {
      .hamburger { display:flex; }
      nav { position:absolute; top:65px; left:0; width:100%; }
      nav ul { flex-direction:column; width:100%; }
      nav li { width:100%; }
      nav a { padding:12px 20px; border-bottom:1px solid #f1f1f1; }
      li.open > .submenu { display:block; }
      .submenu a { padding-left:40px; background:#f9f9f9; }
      .main    { flex-direction:column; }
      .featured{ flex-direction:column; }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="logo"><a href="/">SARJANA</a></div>
    <div class="social-top">
      <a href="#"><img src="https://via.placeholder.com/24?text=F" alt="Facebook"></a>
      <a href="#"><img src="https://via.placeholder.com/24?text=T" alt="Twitter"></a>
      <a href="#"><img src="https://via.placeholder.com/24?text=I" alt="Instagram"></a>
    </div>
    <div class="hamburger" onclick="toggleNav()">
      <span></span><span></span><span></span>
    </div>
  </header>

  <!-- NAVIGATION -->
  <nav id="navbar" class="closed"></nav>

  <!-- SLIDER -->
  <div class="slider"><div class="slides" id="slides"></div></div>

  <!-- FEATURED POST -->
  <div class="featured">
    <img id="feat-img" src="" alt="Featured">
    <h2 id="feat-title"></h2>
  </div>

  <!-- MAIN CONTENT + SIDEBAR -->
  <div class="main">
    <div class="content">
      <div class="ad-slot">[ AD SLOT ]</div>
      <div class="grid" id="grid"></div>
      <div class="ad-slot">[ AD SLOT ]</div>
    </div>
    <aside>
      <div class="widget"><h3>Trending</h3><ul id="trending"></ul></div>
      <div class="widget"><h3>Terpopuler</h3><ul id="popular"></ul></div>
      <div class="widget"><h3>Follow Kami</h3>
        <ul>
          <li><a href="#">Facebook</a></li>
          <li><a href="#">Twitter</a></li>
          <li><a href="#">Instagram</a></li>
          <li><a href="#">YouTube</a></li>
        </ul>
      </div>
      <div class="widget"><h3>Iklan</h3><div class="ad-slot">[ ADSENSE ]</div></div>
    </aside>
  </div>

  <!-- DETAIL PAGE -->
  <div id="detail">
    <button onclick="goHome()">‚Üê Kembali</button>
    <h2 id="d-title"></h2>
    <p class="meta" id="d-meta"></p>
    <img id="d-img" src="" alt="">
    <div class="share">
      <a href="#" title="Share FB">üëç</a>
      <a href="#" title="Share TW">üê¶</a>
      <a href="#" title="Share WA">üí¨</a>
      <a href="#" title="Share LI">üîó</a>
    </div>
    <p class="body" id="d-body"></p>
  </div>

  <!-- FOOTER -->
  <footer>
    powered by <a href="https://opensite.web.id" target="_blank">opensite.web.id</a>
  </footer>

  <script>
    // Data source
    const URL = 'https://opensheet.vercel.app/1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww/berita';
    let articles = [];

    // Define menu structure
    const MENU = [
      { title: 'Home', path: '/' },
      { title: 'Berita', path: '/berita', submenu: [
        { title: 'Nasional', path: '/Nasional' },
        { title: 'Internasional', path: '/Internasional' },
        { title: 'Teknologi', path: '/Teknologi' },
        { title: 'Olahraga', path: '/Olahraga' },
      ] },
      { title: 'Ekonomi', path: '/Ekonomi' },
      { title: 'Hiburan', path: '/Hiburan' },
      { title: 'Lifestyle', path: '/Lifestyle' },
    ];

    // Build nav HTML
    function buildNav() {
      const nav = document.getElementById('navbar');
      const ul = document.createElement('ul');
      MENU.forEach(item => {
        const li = document.createElement('li');
        li.className = item.submenu ? 'menu-item' : '';
        addActiveClass(li, item.path);

        const a = document.createElement('a');
        a.href = item.path;
        a.textContent = item.title;
        a.onclick = navClick;
        li.appendChild(a);

        if (item.submenu) {
          const sub = document.createElement('ul');
          sub.className = 'submenu';
          item.submenu.forEach(s => {
            const sli = document.createElement('li');
            const sa = document.createElement('a');
            sa.href = s.path;
            sa.textContent = s.title;
            sa.onclick = navClick;
            sli.appendChild(sa);
            sub.appendChild(sli);
          });
          li.appendChild(sub);
        }
        ul.appendChild(li);
      });
      nav.appendChild(ul);
    }

    function addActiveClass(li, path) {
      if (location.pathname === path) li.querySelector('a').classList.add('active');
    }

    function navClick(e) {
      e.preventDefault();
      const url = new URL(e.currentTarget.href);
      history.pushState({}, '', url.pathname);
      handleRouting();
      if (window.innerWidth <= 768) toggleNav(false);
    }

    // Close mobile nav when click outside
    document.addEventListener('click', (e) => {
      const nav = document.getElementById('navbar');
      const ham = document.querySelector('.hamburger');
      if (!nav.contains(e.target) && !ham.contains(e.target)) {
        toggleNav(false);
      }
    });

    function toggleNav(force) {
      const nav = document.getElementById('navbar');
      if (force === false) nav.classList.remove('open');
      else nav.classList.toggle('open');
    }

    // Fetch & initialize
    fetch(URL).then(r=>r.json()).then(json=>{
      articles = json;
      buildNav();
      init();
    });

    function init(){
      renderSlider();
      renderFeatured();
      renderWidgets();
      handleRouting();
    }

    // Routing based on pathname
    function handleRouting(){
      const path = decodeURIComponent(location.pathname);
      if (path === '/' || path === '/berita') return renderGrid();
      // check submenu labels
      const menuItem = MENU.find(m => m.path === path);
      if (menuItem && !menuItem.submenu) return renderGrid(menuItem.title);
      if (menuItem && menuItem.submenu) return renderGrid(); 
      // check if submenu label
      for (const m of MENU.filter(m=>m.submenu).flatMap(m=>m.submenu)) {
        if (m.path === path) return renderGrid(m.title);
      }
      // else treat as slug
      const slug = path.slice(1);
      return showDetail(slug);
    }

    // Slider
    function renderSlider(){
      const s = document.getElementById('slides');
      s.innerHTML = '';
      articles.slice(0,5).forEach(a=>{
        const div = document.createElement('div');
        div.className='slide';
        div.innerHTML = `<img src="${a.Gambar}" alt=""><div class="caption">${a.Judul}</div>`;
        s.appendChild(div);
      });
      let idx=0;
      setInterval(()=>{
        idx=(idx+1)%s.children.length;
        s.style.transform=`translateX(${-idx*100}%)`;
      },3000);
    }

    // Featured Post
    function renderFeatured(){
      const a=articles[0]||{};
      document.getElementById('feat-img').src = a.Gambar||'';
      document.getElementById('feat-title').textContent = a.Judul||'';
    }

    // Grid/List
    function renderGrid(label){
      showHomeUI();
      const g = document.getElementById('grid'); g.innerHTML='';
      articles
        .filter(a => !label || a.Label === label)
        .forEach(a => {
          const c=document.createElement('div'); c.className='card';
          c.innerHTML = `<img src="${a.Gambar}" alt="">
            <div class="info">
              <h2><a href="/${a.Slug}">${a.Judul}</a></h2>
              <p>${a.Tanggal}</p>
            </div>`;
          c.querySelector('a').onclick = e => { e.preventDefault(); navClick(e); showDetail(a.Slug); };
          g.appendChild(c);
        });
    }

    // Widgets
    function renderWidgets(){
      const t=document.getElementById('trending'),
            p=document.getElementById('popular');
      t.innerHTML=p.innerHTML='';
      articles.slice(0,5).forEach(a => makeLI(t,a));
      [...articles].sort((a,b)=>b.View-a.View).slice(0,5).forEach(a=>makeLI(p,a));
    }
    function makeLI(parent,a){
      const li=document.createElement('li');
      li.innerHTML = `<a href="/${a.Slug}">${a.Judul}</a>`;
      li.querySelector('a').onclick = e=>{ e.preventDefault(); navClick(e); showDetail(a.Slug); };
      parent.appendChild(li);
    }

    // Detail
    function showDetail(slug){
      const a = articles.find(x=>x.Slug === slug);
      if(!a) return renderGrid();
      document.getElementById('d-title').textContent = a.Judul;
      document.getElementById('d-meta').textContent = `${a.Tanggal} | ${a.Label}`;
      document.getElementById('d-img').src = a.Gambar;
      document.getElementById('d-body').textContent = a.Isi;
      document.querySelector('.slider').style.display = 'none';
      document.querySelector('.featured').style.display = 'none';
      document.querySelector('.main').style.display = 'none';
      document.getElementById('detail').style.display = 'block';
    }

    function goHome(){
      history.pushState({},'', '/');
      renderGrid();
    }

    function showHomeUI(){
      document.querySelector('.slider').style.display = 'block';
      document.querySelector('.featured').style.display = 'flex';
      document.querySelector('.main').style.display = 'flex';
      document.getElementById('detail').style.display = 'none';
    }

    window.onpopstate = handleRouting;
  </script>
</body>
</html>
