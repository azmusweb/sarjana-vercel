<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SARJANA – Portal Berita</title>
  <meta name="description" content="SARJANA – Portal Berita dinamis dengan tampilan premium dan responsif." />
  <link rel="canonical" href="https://sarjana.web.id" />
  <meta property="og:title" content="SARJANA – Portal Berita" />
  <meta property="og:description" content="SARJANA – Portal Berita dinamis dengan tampilan premium dan responsif." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sarjana.web.id" />
  <meta property="og:image" content="https://via.placeholder.com/1200x630" />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary: #0d324d;
      --secondary: #7f5a83;
      --accent: #ffc857;
      --light: #f9f9f9;
      --dark: #222;
      --border: #ddd;
      --shadow: rgba(0,0,0,0.1);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family:'Open Sans',sans-serif; background:var(--light); color:var(--dark); line-height:1.6; }
    a { color:inherit; text-decoration:none; }
    header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding:1rem 2rem; display:flex; justify-content:space-between; align-items:center; color:white;
      box-shadow:0 2px 4px var(--shadow);
    }
    .logo { font-size:1.5rem; font-weight:700; }
    .hamburger { display:none; flex-direction:column; cursor:pointer; }
    .hamburger span { height:3px; width:25px; background:white; margin:4px 0; }
    nav { background:white; border-bottom:1px solid var(--border); overflow:hidden; transition:max-height .3s ease; }
    nav.closed { max-height:0; }
    nav.open { max-height:400px; }
    nav ul {
      list-style:none; display:flex; justify-content:center; gap:1rem;
      padding:1rem; flex-wrap:wrap;
    }
    nav li { position:relative; }
    nav a {
      font-weight:600; padding:.5rem 1rem; border-radius:4px;
      display:block;
    }
    nav a:hover, nav a.active {
      background:var(--accent); color:var(--primary);
    }
    .submenu {
      display:none; position:absolute; top:100%; left:0;
      background:white; border:1px solid var(--border);
      border-radius:5px; box-shadow:0 2px 6px var(--shadow);
    }
    .menu-item:hover .submenu, .menu-item.open .submenu { display:block; }
    .submenu a { padding:.5rem 1rem; white-space:nowrap; }

    .slider {
      max-width:1200px; margin:2rem auto; overflow:hidden;
      border-radius:8px; box-shadow:0 4px 8px var(--shadow);
    }
    .slides { display:flex; transition:transform .5s ease; }
    .slide { min-width:100%; position:relative; }
    .slide img { width:100%; display:block; }
    .caption {
      position:absolute; bottom:10%; left:5%;
      background:rgba(0,0,0,0.6); color:white; padding:1rem; border-radius:4px;
    }

    .featured {
      max-width:1200px; margin:2rem auto; display:flex; gap:2rem; padding:0 1rem;
    }
    .featured img {
      flex:2; width:100%; border-radius:8px; box-shadow:0 2px 6px var(--shadow);
    }
    .featured h2 { flex:1; align-self:center; font-size:2rem; }

    .main {
      max-width:1200px; margin:2rem auto; display:flex; gap:2rem;
      padding:0 1rem; flex-wrap:wrap;
    }
    .content { flex:3; min-width:300px; }
    .grid {
      display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
      gap:1rem;
    }
    .card {
      background:white; border:1px solid var(--border);
      border-radius:8px; overflow:hidden; box-shadow:0 2px 6px var(--shadow);
    }
    .card img { width:100%; }
    .info { padding:1rem; }
    .info h2 { font-size:1.1rem; margin:0 0 .5rem; }
    .info p { font-size:.9rem; color:#666; }

    aside { flex:1; min-width:200px; }
    .widget {
      background:white; border:1px solid var(--border);
      border-radius:8px; margin-bottom:1rem;
      box-shadow:0 2px 6px var(--shadow);
    }
    .widget h3 {
      background:var(--primary); color:white; padding:.5rem 1rem;
      border-radius:8px 8px 0 0;
    }
    .widget ul { list-style:none; padding:1rem; }
    .widget li { margin-bottom:.5rem; }

    .detail {
      display:none; max-width:800px; margin:2rem auto;
      background:white; border:1px solid var(--border);
      border-radius:8px; padding:2rem;
      box-shadow:0 2px 6px var(--shadow);
    }
    .detail button { margin-bottom:1rem; }

    footer {
      text-align:center; padding:1rem; background:var(--light);
      border-top:1px solid var(--border);
    }

    @media(max-width:768px) {
      .hamburger { display:flex; }
      nav ul { flex-direction:column; align-items:flex-start; }
      nav a { width:100%; }
      .submenu a { padding-left:2rem; background:#f9f9f9; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo"><a href="/">SARJANA</a></div>
    <div class="hamburger" onclick="toggleNav()">
      <span></span><span></span><span></span>
    </div>
  </header>
  <nav id="navbar" class="closed"></nav>

  <div class="slider"><div class="slides" id="slides"></div></div>

  <div class="featured">
    <h2 id="feat-title"></h2>
    <img id="feat-img" src="" alt="Featured Post">
  </div>

  <div class="main">
    <div class="content">
      <div class="grid" id="grid"></div>
    </div>
    <aside>
      <div class="widget"><h3>Trending</h3><ul id="trending"></ul></div>
      <div class="widget"><h3>Popular</h3><ul id="popular"></ul></div>
    </aside>
  </div>

  <div class="detail" id="detail">
    <button onclick="goHome()">← Kembali</button>
    <h2 id="d-title"></h2>
    <p id="d-meta"></p>
    <img id="d-img" src="" alt="Detail Image">
    <div id="d-body"></div>
  </div>

  <footer>
    powered by <a href="https://opensite.web.id" target="_blank">opensite.web.id</a>
  </footer>

  <script>
    const sheetURL = 'https://opensheet.vercel.app/1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww/berita';
    let articles = [];

    const MENU = [
      { title: 'Home', path: '/' },
      { title: 'Berita', path: '/berita', submenu: ['Nasional','Internasional','Teknologi','Olahraga'] },
      { title: 'Ekonomi', path: '/Ekonomi' },
      { title: 'Hiburan', path: '/Hiburan' },
      { title: 'Lifestyle', path: '/Lifestyle' }
    ];

    function buildNav() {
      const nav = document.getElementById('navbar'), ul = document.createElement('ul');
      MENU.forEach(item => {
        const li = document.createElement('li');
        if (item.submenu) {
          li.className = 'menu-item';
          const a = document.createElement('a');
          a.href = item.path; a.textContent = item.title + ' ▼';
          a.onclick = e => { e.preventDefault(); li.classList.toggle('open'); route(item.path); };
          li.appendChild(a);
          const sub = document.createElement('ul'); sub.className = 'submenu';
          item.submenu.forEach(label => {
            const sli = document.createElement('li');
            const sa = document.createElement('a');
            sa.href = '/' + label; sa.textContent = label;
            sa.onclick = e => { e.preventDefault(); route('/' + label); };
            sli.appendChild(sa); sub.appendChild(sli);
          });
          li.appendChild(sub);
        } else {
          const a = document.createElement('a');
          a.href = item.path; a.textContent = item.title;
          a.onclick = e => { e.preventDefault(); route(item.path); };
          li.appendChild(a);
        }
        ul.appendChild(li);
      });
      nav.appendChild(ul);
    }

    function toggleNav() {
      document.getElementById('navbar').classList.toggle('open');
    }

    document.addEventListener('click', e => {
      const nav = document.getElementById('navbar'), ham = document.querySelector('.hamburger');
      if (!nav.contains(e.target) && !ham.contains(e.target)) {
        nav.classList.remove('open');
        document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('open'));
      }
    });

    function route(path) {
      history.pushState({}, '', path);
      handleRoute();
    }
    window.onpopstate = handleRoute;

    fetch(sheetURL)
      .then(r=>r.json())
      .then(data=> {
        articles = data;
        buildNav();
        renderSlider();
        renderFeatured();
        renderWidgets();
        handleRoute();
      });

    function handleRoute() {
      const p = location.pathname.replace('/', '');
      if (!p || p==='berita') return renderGrid();
      const art = articles.find(a => a.Slug===p);
      if (art) return showDetail(p);
      return renderGrid(p);
    }

    function renderSlider() {
      const s = document.getElementById('slides'); s.innerHTML = '';
      articles.slice(0,5).forEach(a => {
        const d = document.createElement('div'); d.className='slide';
        d.innerHTML = `<img src="${a.Gambar}" alt=""><div class="caption">${a.Judul}</div>`;
        s.appendChild(d);
      });
    }

    function renderFeatured() {
      const a = articles[0] || {};
      document.getElementById('feat-img').src = a.Gambar || '';
      document.getElementById('feat-title').textContent = a.Judul || '';
    }

    function renderGrid(label) {
      hideDetail();
      const g = document.getElementById('grid'); g.innerHTML = '';
      articles.filter(a => !label || a.Label===label).forEach(a => {
        const c = document.createElement('div'); c.className='card';
        c.innerHTML = `<img src="${a.Gambar}" alt=""><div class="info">
          <h2><a href="/${a.Slug}" onclick="event.preventDefault();route('/${a.Slug}')">${a.Judul}</a></h2>
          <p>${a.Tanggal}</p></div>`;
        g.appendChild(c);
      });
    }

    function showDetail(slug) {
      const a = articles.find(x=>x.Slug===slug);
      if (!a) return;
      document.querySelector('.slider').style.display='none';
      document.querySelector('.featured').style.display='none';
      document.querySelector('.main').style.display='none';
      const d = document.getElementById('detail'); d.style.display='block';
      document.getElementById('d-title').textContent = a.Judul;
      document.getElementById('d-meta').textContent = `${a.Tanggal} | ${a.Label}`;
      document.getElementById('d-img').src = a.Gambar;
      document.getElementById('d-body').textContent = a.Isi;
    }

    function hideDetail() {
      document.getElementById('detail').style.display='none';
      document.querySelector('.slider').style.display='block';
      document.querySelector('.featured').style.display='flex';
      document.querySelector('.main').style.display='flex';
    }

    function goHome() {
      route('/');
    }

    function renderWidgets() {
      const t = document.getElementById('trending'), p = document.getElementById('popular');
      t.innerHTML = p.innerHTML = '';
      articles.slice(0,5).forEach(a => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="/${a.Slug}" onclick="event.preventDefault();route('/${a.Slug}')">${a.Judul}</a>`;
        t.appendChild(li);
      });
      [...articles].sort((a,b)=>b.View-a.View).slice(0,5).forEach(a => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="/${a.Slug}" onclick="event.preventDefault();route('/${a.Slug}')">${a.Judul}</a>`;
        p.appendChild(li);
      });
    }
  </script>
</body>
</html>
